<% if @post.errors.any? %>
<h2>The following errors prevented the post from saving:</h2>
<ul>
    <% @post.errors.full_messages.each do |msg|%>
    <li><%= msg %></li>
    <% end %>
</ul>
<% end %>

<%= form_for @post do |f| %>
<p>
    <%= f.collection_select(:category_id, Category.all, :id, :name,) %>
</p>
<p>
    <%= f.collection_select(:tag_ids, Tag.all, :id, :name, {}, {class: "multiple", multiple: "multiple"}) %>
</p>
<p>
Agrega un Thumbnail! <%= f.file_field :thumbnail %>
<%= post_thumbnail(@post) %>
<% if @post.thumbnail.attached? %>
<%= link_to 'Remove', deleteattachment_path(@post.thumbnail.id),method: :delete, data: { confirm: 'Are you sure?' } %>
<%end%>
</p>
<p>
    <%= f.file_field :images, multiple: true %>
    <% @post.images.each do |image| %>
        <%= image_tag image.variant(resize: '100x100') %>
        <%= link_to 'Remove', deleteattachment_path(image.id),method: :delete, data: { confirm: 'Are you sure?' } %>
        <% end %>
</p>
<p>
    <%= f.label :title %><br>
    <%= f.text_field :title %>
</p>
<p>
    <%= f.label :description %><br>
    <%= f.text_area :description %>
</p>
<p>
    <%= f.submit %>
</p>

<% end %>
<%= link_to 'Back', posts_path %>